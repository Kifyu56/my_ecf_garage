
-- Active: 1705769031272@@127.0.0.1@3306@wxqxukbk_garage_parrot


CREATE TABLE USERS (
    user_id INT AUTO_INCREMENT PRIMARY KEY, user_identifiant VARCHAR(255) NOT NULL UNIQUE, password_hash VARCHAR(255) NOT NULL, role ENUM('admin', 'employee') NOT NULL
);

CREATE TABLE ADMINISTRATORS (
    admin_id INT AUTO_INCREMENT PRIMARY KEY, user_id INT NOT NULL, last_name VARCHAR(100) NOT NULL, first_name VARCHAR(100) NOT NULL, email VARCHAR(254) NOT NULL UNIQUE, phone_number VARCHAR(20), birthdate DATE NOT NULL, FOREIGN KEY (user_id) REFERENCES USERS (user_id)
);

CREATE TABLE EMPLOYEES (
    employee_id INT AUTO_INCREMENT PRIMARY KEY, user_id INT NOT NULL, last_name VARCHAR(100) NOT NULL, first_name VARCHAR(100) NOT NULL, email VARCHAR(254) NOT NULL UNIQUE, phone_number VARCHAR(20), birthdate DATE NOT NULL, FOREIGN KEY (user_id) REFERENCES USERS (user_id)
);

CREATE TABLE SERVICES (
    service_id INT AUTO_INCREMENT PRIMARY KEY, description TEXT NOT NULL, image_url VARCHAR(255)
);

CREATE TABLE OPENING_HOURS (
    opening_hour_id INT AUTO_INCREMENT PRIMARY KEY, day VARCHAR(10) NOT NULL, opening_time TIME NOT NULL, closing_time TIME NOT NULL
);

CREATE TABLE VEHICLE_OWNERS (
    owner_id INT AUTO_INCREMENT PRIMARY KEY, last_name VARCHAR(100) NOT NULL, first_name VARCHAR(100) NOT NULL, email VARCHAR(254) NOT NULL UNIQUE, phone_number VARCHAR(20), address TEXT NOT NULL
);

CREATE TABLE VEHICLE_DETAILS (
    vehicle_id INT AUTO_INCREMENT PRIMARY KEY, owner_id INT NOT NULL, brand VARCHAR(100) NOT NULL, model VARCHAR(100) NOT NULL, year INT NOT NULL, distance FLOAT NOT NULL, price FLOAT NOT NULL, description TEXT, FOREIGN KEY (owner_id) REFERENCES VEHICLE_OWNERS (owner_id)
);

CREATE TABLE VEHICLE_IMAGES (
    image_id INT AUTO_INCREMENT PRIMARY KEY, vehicle_id INT NOT NULL, image_url VARCHAR(255) NOT NULL, FOREIGN KEY (vehicle_id) REFERENCES VEHICLE_DETAILS (vehicle_id)
);

CREATE TABLE TESTIMONIALS (
    testimonial_id INT AUTO_INCREMENT PRIMARY KEY, last_name VARCHAR(100), first_name VARCHAR(100), email VARCHAR(254), message TEXT NOT NULL, created_testimonial_at DATETIME DEFAULT CURRENT_TIMESTAMP, status_testimonal VARCHAR(50) NOT NULL, statut_changed_testimonial_at DATETIME
);

CREATE TABLE CONTACT_FORMS (
    contact_form_id INT AUTO_INCREMENT PRIMARY KEY, last_name VARCHAR(100), first_name VARCHAR(100), email VARCHAR(254), message TEXT NOT NULL, created_form_At DATETIME DEFAULT CURRENT_TIMESTAMP, status_form VARCHAR(50) NOT NULL, status_changed_form_At DATETIME
);